<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Events</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body id="events" class="article">
<div id="header">
<h1>Events</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Zalando’s architecture centers around decoupled microservices and in
that context we favour asynchronous event driven approaches. The
guidelines in this section focus on how to design and publish events
intended to be shared for others to consume.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_events_event_types_and_categories">Events, event types, and categories</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Events are defined using an item called an <em>Event Type</em>. The Event Type
allows events to have their structure declared with a schema by
producers and understood by consumers. An Event Type declares standard
information, such as a name, an owning application (and by implication,
an owning team), a schema defining the event&#8217;s custom data, and a
compatibility mode declaring how the schema will be evolved. Event Types
also allow the declaration of validation and enrichment strategies for
events, along with supplemental information such as how events can be
partitioned in an event stream.</p>
</div>
<div class="paragraph">
<p>Event Types belong to a well known <em>Event Category</em> (such as a data
change category), which provides extra information that is common to
that kind of event.</p>
</div>
<div class="paragraph">
<p>Event Types can be published and made available as API resources for
teams to use, typically in an <em>Event Type Registry</em>. Each event
published can then be validated against the overall structure of its
event type and the schema for its custom data.</p>
</div>
<div class="paragraph">
<p>The basic model described above was originally developed in the
<a href="https://github.com/zalando/nakadi">Nakadi project</a>, which acts as a
reference implementation of the event type registry, and as a validating
publish/subscribe broker for event producers and consumers.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="194">{MUST} treat events as part of the service interface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Events are part of a service’s interface to the outside world equivalent
in standing to a service’s REST API. Services publishing data for
integration must treat their events as a first class design concern,
just as they would an API. For example this means approaching events
with the "API first" principle in mind as described in the <a href="#introduction">[introduction]</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="195">{MUST} make event schema available for review</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Services publishing event data for use by others must make the event
schema as well as the event type definition available for review.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="196">{MUST} ensure event schema conforms to Open API schema object</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To align the event schema specifications to API specifications, we use
the Schema Object as defined by the Open API Specifications to define event
schemas. This is particularly useful for events that represent data changes
about resources also used in other APIs.</p>
</div>
<div class="paragraph">
<p>The <a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#schemaObject">Open
API Schema Object</a> is an <strong>extended subset</strong> of
<a href="http://json-schema.org/">JSON Schema Draft 4</a>. For convenience,
we highlight some important differences below. Please refer to the
<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#schemaObject">Open
API Schema Object specification</a> for details.</p>
</div>
<div class="paragraph">
<p>As the Open API Schema Object specification <em>removes</em> some JSON Schema
keywords, the following properties <strong>must not</strong> be used in event schemas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>additionalItems</code></p>
</li>
<li>
<p><code>contains</code></p>
</li>
<li>
<p><code>patternProperties</code></p>
</li>
<li>
<p><code>dependencies</code></p>
</li>
<li>
<p><code>propertyNames</code></p>
</li>
<li>
<p><code>const</code></p>
</li>
<li>
<p><code>not</code></p>
</li>
<li>
<p><code>oneOf</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>On the other side Schema Object <em>redefines</em> some JSON Schema keywords:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>additionalProperties</code>: For event types that declare compatibility
guarantees, there are recommended constraints around the use of this
field. See the guideline <a href="#210">{SHOULD} avoid <code>additionalProperties</code> in event type definitions</a> for details.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Finally, the Schema Object <em>extends</em> JSON Schema with some keywords:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>readOnly</code>: events are logically immutable, so <code>readOnly</code> can be
considered redundant, but harmless.</p>
</li>
<li>
<p><code>discriminator</code>: to support polymorphism, as an alternative to <code>oneOf</code>.</p>
</li>
<li>
<p><code>^x-</code>: patterned objects in the form of
<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#vendorExtensions">vendor
extensions</a> can be used in event type schema, but it might be the case
that general purpose validators do not understand them to enforce a
validation check, and fall back to must-ignore processing. A future
version of the guidelines may define well known vendor extensions for
events.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="197">{MUST} ensure that events are registered as event types</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Zalando&#8217;s architecture, events are registered using a structure
called an <em>Event Type</em>. The Event Type declares standard information as
follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A well known event category, such as a general or data change
category.</p>
</li>
<li>
<p>The name of the event type.</p>
</li>
<li>
<p>The definition of the <a href="#219">event target audience</a>.</p>
</li>
<li>
<p>An owning application, and by implication, an owning team.</p>
</li>
<li>
<p>A schema defining the event payload.</p>
</li>
<li>
<p>The compatibility mode for the type.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Event Types allow easier discovery of event information and ensure that
information is well-structured, consistent, and can be validated.</p>
</div>
<div class="paragraph">
<p>Event type owners must pay attention to the choice of compatibility
mode. The mode provides a means to evolve the schema. The range of
modes are designed to be flexible enough so that producers can evolve
schemas while not inadvertently breaking existing consumers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>none</code>: Any schema modification is accepted, even if it might break
existing producers or consumers. When validating events, undefined
properties are accepted unless declared in the schema.</p>
</li>
<li>
<p><code>forward</code>: A schema <code>S1</code> is forward compatible if the previously
registered schema, <code>S0</code> can read events defined by <code>S1</code> - that is,
consumers can read events tagged with the latest schema version using
the previous version as long as consumers follow the robustness
principle described in the guideline&#8217;s <a href="#api-design-principles">[api-design-principles]</a>.</p>
</li>
<li>
<p><code>compatible</code>: This means changes are fully compatible. A new schema,
<code>S1</code>, is fully compatible when every event published since the first
schema version will validate against the latest schema. In compatible
mode, only the addition of new optional properties and definitions to an
existing schema is allowed. Other changes are forbidden.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The compatibility mode interact with revision numbers in the schema
<code>version</code> field, which follows semantic versioning (MAJOR.MINOR.PATCH):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Changing an event type with compatibility mode <code>compatible</code> can lead
to a PATCH or MINOR version revision. MAJOR breaking changes are not
allowed.</p>
</li>
<li>
<p>Changing an event type with compatibility mode <code>forward</code> can lead to a
PATCH or MINOR version revision. MAJOR breaking changes are not allowed.</p>
</li>
<li>
<p>Changing an event type with compatibility mode <code>none</code> can lead to
PATCH, MINOR or MAJOR level changes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following examples illustrate this relations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Changes to the event type&#8217;s <code>title</code> or <code>description</code> are considered
PATCH level.</p>
</li>
<li>
<p>Adding new optional fields to an event type&#8217;s schema is considered a
MINOR level change.</p>
</li>
<li>
<p>All other changes are considered MAJOR level, such as renaming or
removing fields, or adding new required fields.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The core Event Type structure is shown below as an Open API object
definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">EventType:
  description: |
    An event type defines the schema and its runtime properties. The required
    fields are the minimum set the creator of an event type is expected to
    supply.
  required:
    - name
    - category
    - owning_application
    - schema
  properties:
    name:
      description: |
        Name of this EventType. The name must follow the functional naming
        pattern `&lt;functional-name&gt;.&lt;event-name&gt;` to preserve global
        uniqueness and readability.
      type: string
      pattern: '[a-z][a-z0-9-]*\.[a-z][a-z0-9-]*'
      example: |
        transactions.order.order-cancelled
        customer.personal-data.email-changed
    audience:
      type: string
      x-extensible-enum:
        - component-internal
        - business-unit-internal
        - company-internal
        - external-partner
        - external-public
      description: |
        Intended target audience of the event type, analogue to audience definition for REST APIs
        in rule #219 -- see https://opensource.zalando.com/restful-api-guidelines/#219
    owning_application:
      description: |
        Name of the application (eg, as would be used in infrastructure
        application or service registry) owning this `EventType`.
      type: string
      example: price-service
    category:
      description: Defines the category of this EventType.
      type: string
      x-extensible-enum:
        - data
        - general
    compatibility_mode:
      description: |
        The compatibility mode to evolve the schema.
      type: string
      x-extensible-enum:
        - compatible
        - forward
        - none
      default: forward
    schema:
      description: The most recent payload schema for this EventType.
      type: object
      properties:
        version:
          description: Values are based on semantic versioning (eg "1.2.1").
          type: string
          default: '1.0.0'
        created_at:
          description: Creation timestamp of the schema.
          type: string
          readOnly: true
          format: date-time
          example: '1996-12-19T16:39:57-08:00'
        type:
          description: |
             The schema language of schema definition. Currently only
             json_schema (JSON Schema v04) syntax is defined, but in the
             future there could be others.
          type: string
          x-extensible-enum:
            - json_schema
        schema:
          description: |
              The schema as string in the syntax defined in the field type.
          type: string
      required:
        - type
        - schema
    ordering_key_fields:
      type: array
      description: |
        Indicates which field is used for application level ordering of events.
        It is typically a single field, but also multiple fields for compound
        ordering key are supported (first item is most significant).

        This is an informational only event type attribute for specification of
        application level ordering. Nakadi transportation layer is not affected,
        where events are delivered to consumers in the order they were published.

        Scope of the ordering is all events (of all partitions), unless it is
        restricted to data instance scope in combination with
        `ordering_instance_ids` attribute below.

        This field can be modified at any moment, but event type owners are
        expected to notify consumer in advance about the change.

        *Background:* Event ordering is often created on application level using
        ascending counters, and data providers/consumers do not need to rely on the
        event publication order. A typical example are data instance change events
        used to keep a slave data store replica in sync. Here you have an order
        defined per instance using data object change counters (aka row update
        version) and the order of event publication is not relevant, because
        consumers for data synchronization skip older instance versions when they
        reconstruct the data object replica state.

      items:
        type: string
        description: |
          Indicates a single ordering field. This is a JsonPointer, which is applied
          onto the whole event object, including the contained metadata and data (in
          case of a data change event) objects. It must point to a field of type
          string or number/integer (as for those the ordering is obvious).

          Indicates a single ordering field. It is a simple path (dot separated) to
          the JSON leaf element of the whole event object, including the contained metadata and data (in
          case of a data change event) objects. It must point to a field of type
          string or number/integer (as for those the ordering is obvious), and must be
          present in the schema.
        example: "data.order_change_counter"
    ordering_instance_ids:
      type: array
      description: |
        Indicates which field represents the data instance identifier and scope in
        which ordering_key_fields provides a strict order. It is typically a single
        field, but multiple fields for compound identifier keys are also supported.

        This is an informational only event type attribute without specific Nakadi
        semantics for specification of application level ordering. It only can be
        used in combination with `ordering_key_fields`.

        This field can be modified at any moment, but event type owners are expected
        to notify consumer in advance about the change.
      items:
        type: string
        description: |
          Indicates a single key field. It is a simple path (dot separated) to the JSON
          leaf element of the whole event object, including the contained metadata and
          data (in case of a data change event) objects, and it must be present in the
          schema.
       example: "data.order_number"
    created_at:
      description: When this event type was created.
      type: string
      pattern: date-time
    updated_at:
      description: When this event type was last updated.
      type: string
      pattern: date-time</code></pre>
</div>
</div>
<div class="paragraph">
<p>APIs such as registries supporting event types, may extend the model,
including the set of supported categories and schema formats. For
example the Nakadi API&#8217;s event category registration also allows the
declaration of validation and enrichment strategies for events, along
with supplemental information, such as how events are partitioned in the
stream (see <a href="#204">{SHOULD} use the hash partition strategy for data change events</a>).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="198">{MUST} ensure that events conform to a well-known event category</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An <em>event category</em> describes a generic class of event types. The
guidelines define two such categories:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>General Event: a general purpose category.</p>
</li>
<li>
<p>Data Change Event: a category used for describing changes to data
entities used for data replication based data integration.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The set of categories is expected to evolve in the future.</p>
</div>
<div class="paragraph">
<p>A category describes a predefined structure that event publishers must
conform to along with standard information about that kind of event
(such as the operation for a data change event).</p>
</div>
<div class="sect2">
<h3 id="_the_general_event_category">The general event category</h3>
<div class="paragraph">
<p>The structure of the <em>General Event Category</em> is shown below as an Open
API Schema Object definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">GeneralEvent:
  description: |
    A general kind of event. Event kinds based on this event define their
    custom schema payload as the top level of the document, with the
    "metadata" field being required and reserved for standard metadata. An
    instance of an event based on the event type thus conforms to both the
    EventMetadata definition and the custom schema definition. Previously
    this category was called the Business Category.
  required:
    - metadata
  properties:
    metadata:
        $ref: '#/definitions/EventMetadata'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Event types based on the General Event Category define their custom
schema payload at the top-level of the document, with the
<a href="#event-metadata">metadata</a> field being reserved for standard
information (the contents of <a href="#event-metadata">metadata</a> are
described further down in this section).</p>
</div>
<div class="paragraph">
<p>In the example fragment below, the reserved <a href="#event-metadata">metadata</a>
field is shown with fields "a" and "b" being defined as part of the custom
schema:</p>
</div>
<div class="paragraph">
<p>Note:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The General Event in a previous version of the guidelines was called a
<em>Business Event</em>. Implementation experience has shown that the
category&#8217;s structure gets used for other kinds of events, hence the name
has been generalized to reflect how teams are using it.</p>
</li>
<li>
<p>The General Event is still useful and recommended for the purpose of
defining events that drive a business process.</p>
</li>
<li>
<p>The Nakadi broker still refers to the General Category as the Business
Category and uses the keyword "business" for event type registration.
Other than that, the JSON structures are identical.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="#201">{MUST} use the general event category to signal steps and arrival points in business processes</a> for more guidance on how to use the category.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_data_change_event_category">The data change event category</h3>
<div class="paragraph">
<p>The <em>Data Change Event Category</em> structure is shown below as an Open API
Schema Object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">DataChangeEvent:
  description: |
    Represents a change to an entity. The required fields are those
    expected to be sent by the producer, other fields may be added
    by intermediaries such as a publish/subscribe broker. An instance
    of an event based on the event type conforms to both the
    DataChangeEvent's definition and the custom schema definition.
  required:
    - metadata
    - data_op
    - data_type
    - data
  properties:
    metadata:
      description: The metadata for this event.
      $ref: '#/definitions/EventMetadata'
    data:
      description: |
        Contains custom payload for the event type. The payload must conform
        to a schema associated with the event type declared in the metadata
        object's `event_type` field.
      type: object
    data_type:
      description: name of the (business) data entity that has been mutated
      type: string
      example: 'sales_order.order'
    data_op:
      type: string
      enum: ['C', 'U', 'D', 'S']
      description: |
        The type of operation executed on the entity:

        - C: Creation of an entity
        - U: An update to an entity.
        - D: Deletion of an entity.
        - S: A snapshot of an entity at a point in time.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Data Change Event Category is structurally different to the General
Event Category. It defines a field called <code>data</code> for placing the custom
payload information, as well as specific information related to data
changes in the <code>data_type</code>. In the example fragment below, the fields
<code>a</code> and <code>b</code> are part of the custom payload housed inside the <code>data</code>
field:</p>
</div>
<div class="paragraph">
<p>See the following guidelines for more guidance on how to use the Data
Change Event Category:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#205">{SHOULD} ensure that data change events match the APIs resources</a></p>
</li>
<li>
<p><a href="#202">{MUST} use data change events to signal mutations</a></p>
</li>
<li>
<p><a href="#204">{SHOULD} use the hash partition strategy for data change events</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="event-metadata">Event metadata</h3>
<div class="paragraph">
<p>The General and Data Change event categories share a common structure
for <em>metadata</em>. The metadata structure is shown below as an Open API
Schema Object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">EventMetadata:
  type: object
  description: |
    Carries metadata for an Event along with common fields. The required
    fields are those expected to be sent by the producer, other fields may be
    added by intermediaries such as publish/subscribe broker.
  required:
    - eid
    - occurred_at
  properties:
    eid:
      description: Identifier of this event.
      type: string
      format: uuid
      example: '105a76d8-db49-4144-ace7-e683e8f4ba46'
    event_type:
      description: The name of the EventType of this Event.
      type: string
      example: 'example.important-business-event'
    occurred_at:
      description: When the event was created according to the producer.
      type: string
      format: date-time
      example: '1996-12-19T16:39:57-08:00'
    received_at:
      description: |
        When the event was seen by an intermediary such as a broker.
      type: string
      readOnly: true
      format: date-time
      example: '1996-12-19T16:39:57-08:00'
    version:
      description: |
        Version of the schema used for validating this event. This may be
        enriched upon reception by intermediaries. This string uses semantic
        versioning.
      type: string
      readOnly: true
    parent_eids:
      description: |
        Event identifiers of the Event that caused the generation of
        this Event. Set by the producer.
      type: array
      items:
        type: string
        format: uuid
      example: '105a76d8-db49-4144-ace7-e683e8f4ba46'
    flow_id:
      description: |
        A flow-id for this event (corresponds to the X-Flow-Id HTTP header).
      type: string
      example: 'JAh6xH4OQhCJ9PutIV_RYw'
    partition:
      description: |
        Indicates the partition assigned to this Event. Used for systems
        where an event type's events can be sub-divided into partitions.
      type: string
      example: '0'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Please note than intermediaries acting between the producer of an event
and its ultimate consumers, may perform operations like validation of
events and enrichment of an event&#8217;s <a href="#event-metadata">metadata</a>. For
example brokers such as Nakadi, can validate and enrich events with
arbitrary additional fields that are not specified here and may set default
or other values, if some of the specified fields are not supplied. How
such systems work is outside the scope of these guidelines but producers
and consumers working with such systems should look into their documentation
for additional information.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="199">{MUST} ensure that events define useful business resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Events are intended to be used by other services including business
process/data analytics and monitoring. They should be based around the
resources and business processes you have defined for your service
domain and adhere to its natural lifecycle (see also <a href="#139">[139]</a> and <a href="#140">[140]</a>).</p>
</div>
<div class="paragraph">
<p>As there is a cost in creating an explosion of event types and topics,
prefer to define event types that are abstract/generic enough to be
valuable for multiple use cases, and avoid publishing event types
without a clear need.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="200">{MUST} ensure that events do not provide sensitive data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Similar to API permission scopes, there will be event type permissions
passed via an OAuth token supported in near future. In the meantime,
teams are asked to note the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sensitive data, such as (e-mail addresses, phone numbers, etc) are
subject to strict access and data protection controls.</p>
</li>
<li>
<p>Event type owners <strong>must not</strong> publish sensitive information unless it&#8217;s
mandatory or necessary to do so. For example, events sometimes need to
provide personal data, such as delivery addresses in shipment orders (as
do other APIs), and this is fine.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="201">{MUST} use the general event category to signal steps and arrival points in business processes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When publishing events that represent steps in a business process, event
types must be based on the General Event category.</p>
</div>
<div class="paragraph">
<p>All your events of a single business process will conform to the
following rules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Business events must contain a specific identifier field (a business
process id or "bp-id") similar to flow-id to allow for efficient
aggregation of all events in a business process execution.</p>
</li>
<li>
<p>Business events must contain a means to correctly order events in a
business process execution. In distributed settings where monotonically
increasing values (such as a high precision timestamp that is assured to
move forwards) cannot be obtained, the <code>parent_eids</code> data structure
allows causal relationships to be declared between events.</p>
</li>
<li>
<p>Business events should only contain information that is new to the
business process execution at the specific step/arrival point.</p>
</li>
<li>
<p>Each business process sequence should be started by a business event
containing all relevant context information.</p>
</li>
<li>
<p>Business events must be published reliably by the service.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>At the moment we cannot state whether it&#8217;s best practice to publish all
the events for a business process using a single event type and
represent the specific steps with a state field, or whether to use
multiple event types to represent each step. For now we suggest
assessing each option and sticking to one for a given business process.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="202">{MUST} use data change events to signal mutations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When publishing events that represents created, updated, or deleted
data, change event types must be based on the Data Change Event
category.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Change events must identify the changed entity to allow aggregation of
all related events for the entity.</p>
</li>
<li>
<p>Change events <a href="#203">{SHOULD} provide means for explicit event ordering</a>.</p>
</li>
<li>
<p>Change events must be published reliably by the service.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="203">{SHOULD} provide means for explicit event ordering</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some common error cases may require event consumers to reconstruct event
streams or replay events from a position within the stream. Events
<em>should</em> therefore contain a way to restore their partial order of
occurrence.</p>
</div>
<div class="paragraph">
<p>This can be done – among other ways – by adding</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a strictly monotonically increasing entity version (e.g. as
created by a database) to allow for partial ordering of all
events for an entity, or</p>
</li>
<li>
<p>a strictly monotonically increasing message counter.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the event type definition, the <code>ordering_key_fields</code> property
should be used to indicate which field(s) contains the ordering
key, if any.</p>
</div>
<div class="paragraph">
<p>System timestamps are not necessarily a good choice, since exact
synchronization of clocks in distributed systems is difficult, two
events may occur in the same microsecond and system clocks may jump
backward or forward to compensate drifts or leap-seconds. If you use
system timestamps to indicate event ordering, you must carefully ensure
that your designated event order is not messed up by these effects.</p>
</div>
<div class="paragraph">
<p>Also, if using timestamps, the producer <strong>must</strong> make sure that they
are formatted for all events in the UTC time zone, to allow for a
simple string-based comparison.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong> that basing events on data structures that can be converged upon
in a distributed setting (such as
<a href="https://en.wikipedia.org/wiki/Conflict-free_replicated_data_type">CRDTs</a>,
<a href="https://en.wikipedia.org/wiki/Logical_clock">logical clocks</a> and
<a href="https://en.wikipedia.org/wiki/Vector_clock">vector clocks</a>) is outside
the scope of this guidance.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="204">{SHOULD} use the hash partition strategy for data change events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>hash</code> partition strategy allows a producer to define which fields
in an event are used as input to compute a logical partition the event
should be added to. Partitions are useful as they allow supporting
systems to scale their throughput while provide local ordering for event
entities.</p>
</div>
<div class="paragraph">
<p>The <code>hash</code> option is particulary useful for data changes as it allows
all related events for an entity to be consistently assigned to a
partition, providing a relative ordered stream of events for that
entity. This is because while each partition has a total ordering,
ordering across partitions is not assured by a supporting system, thus
it is possible for events sent across partitions to appear in a
different order to consumers that the order they arrived at the server.</p>
</div>
<div class="paragraph">
<p>When using the <code>hash</code> strategy the partition key in almost all cases
should represent the entity being changed and not a per event or change
identifier such as the <code>eid</code> field or a timestamp. This ensures data
changes arrive at the same partition for a given entity and can be
consumed effectively by clients.</p>
</div>
<div class="paragraph">
<p>There may be exceptional cases where data change events could have their
partition strategy set to be the producer defined or random options, but
generally <code>hash</code> is the right option - that is while the guidelines here
are a "should", they can be read as "must, unless you have a very good
reason".</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="205">{SHOULD} ensure that data change events match the APIs resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A data change event&#8217;s representation of an entity should correspond to
the REST API representation.</p>
</div>
<div class="paragraph">
<p>There&#8217;s value in having the fewest number of published structures for a
service. Consumers of the service will be working with fewer
representations, and the service owners will have less API surface to
maintain. In particular, you should only publish events that are
interesting in the domain and abstract away from implementation or local
details - there&#8217;s no need to reflect every change that happens within
your system.</p>
</div>
<div class="paragraph">
<p>There are cases where it could make sense to define data change events
that don&#8217;t directly correspond to your API resource representations.
Some examples are -</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Where the API resource representations are very different from the
datastore representation, but the physical data are easier to reliably
process for data integration.</p>
</li>
<li>
<p>Publishing aggregated data. For example a data change to an individual
entity might cause an event to be published that contains a coarser
representation than that defined for an API</p>
</li>
<li>
<p>Events that are the result of a computation, such as a matching
algorithm, or the generation of enriched data, and which might not be
stored as entity by the service.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="207">{MUST} indicate ownership of event types</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Event definitions must have clear ownership - this can be indicated via
the <code>owning_application</code> field of the EventType.</p>
</div>
<div class="paragraph">
<p>Typically there is one producer application, which owns the EventType
and is responsible for its definition, akin to how RESTful API
definitions are managed. However, the owner may also be a particular
service from a set of multiple services that are producing the same kind
of event.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="208">{MUST} define event payloads compliant with overall API guidelines</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Events must be consistent with other API data and the API Guidelines in
general.</p>
</div>
<div class="paragraph">
<p>Everything expressed in the <a href="#introduction">[introduction]</a> to
these Guidelines is applicable to event data interchange between
services. This is because our events, just like our APIs, represent a
commitment to express what our systems do and designing high-quality,
useful events allows us to develop new and interesting products and
services.</p>
</div>
<div class="paragraph">
<p>What distinguishes events from other kinds of data is the delivery style
used, asynchronous publish-subscribe messaging. But there is no reason
why they could not be made available using a REST API, for example via a
search request or as a paginated feed, and it will be common to base
events on the models created for the service’s REST API.</p>
</div>
<div class="paragraph">
<p>The following existing guideline sections are applicable to events:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#general-guidelines">[general-guidelines]</a></p>
</li>
<li>
<p><a href="#api-naming">[api-naming]</a></p>
</li>
<li>
<p><a href="#data-formats">[data-formats]</a></p>
</li>
<li>
<p><a href="#common-data-types">[common-data-types]</a></p>
</li>
<li>
<p><a href="#hypermedia">[hypermedia]</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="209">{MUST} maintain backwards compatibility for events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Changes to events must be based around making additive and backward
compatible changes. This follows the guideline, "Must: Don’t Break
Backward Compatibility" from the <a href="#compatibility">[compatibility]</a> guidelines.</p>
</div>
<div class="paragraph">
<p>In the context of events, compatibility issues are complicated by the
fact that producers and consumers of events are highly asynchronous and
can’t use content-negotiation techniques that are available to REST
style clients and servers. This places a higher bar on producers to
maintain compatibility as they will not be in a position to serve
versioned media types on demand.</p>
</div>
<div class="paragraph">
<p>For event schema, these are considered backward compatible changes, as
seen by consumers -</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adding new optional fields to JSON objects.</p>
</li>
<li>
<p>Changing the order of fields (field order in objects is arbitrary).</p>
</li>
<li>
<p>Changing the order of values with same type in an array.</p>
</li>
<li>
<p>Removing optional fields.</p>
</li>
<li>
<p>Removing an individual value from an enumeration.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These are considered backwards-incompatible changes, as seen by
consumers -</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Removing required fields from JSON objects.</p>
</li>
<li>
<p>Changing the default value of a field.</p>
</li>
<li>
<p>Changing the type of a field, object, enum or array.</p>
</li>
<li>
<p>Changing the order of values with different type in an array (also
known as a tuple).</p>
</li>
<li>
<p>Adding a new optional field to redefine the meaning of an existing
field (also known as a co-occurrence constraint).</p>
</li>
<li>
<p>Adding a value to an enumeration (note that <a href="#112"><code>x-extensible-enum</code></a>
is not available in JSON Schema)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="210">{SHOULD} avoid <code>additionalProperties</code> in event type definitions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Event type schema should avoid using <code>additionalProperties</code>
declarations, in order to support schema evolution.</p>
</div>
<div class="paragraph">
<p>Events are often intermediated by publish/subscribe systems and are
commonly captured in logs or long term storage to be read later. In
particular, the schemas used by publishers and consumers can<br>
drift over time. As a result, compatibility and extensibility issues
that happen less frequently with client-server style APIs become
important and regular considerations for event design. The guidelines
recommend the following to enable event schema evolution:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Publishers who intend to provide compatibility and allow their schemas
to evolve safely over time <strong>must not</strong> declare an <code>additionalProperties</code>
field with a value of <code>true</code> (i.e., a wildcard extension point). Instead
they must define new optional fields and update their schemas in advance
of publishing those fields.</p>
</li>
<li>
<p>Consumers <strong>must</strong> ignore fields they cannot process and not raise
errors. This can happen if they are processing events with an older copy
of the event schema than the one containing the new definitions
specified by the publishers.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The above constraint does not mean fields can never be added in future
revisions of an event type schema - additive compatible changes are
allowed, only that the new schema for an event type must define the
field first before it is published within an event. By the same turn the
consumer must ignore fields it does not know about from its copy of the
schema, just as they would as an API client - that is, they cannot treat
the absence of an <code>additionalProperties</code> field as though the event type
schema was closed for extension.</p>
</div>
<div class="paragraph">
<p>Requiring event publishers to define their fields ahead of publishing
avoids the problem of <em>field redefinition</em>. This is when a publisher
defines a field to be of a different type that was already being
emitted, or, is changing the type of an undefined field. Both of these
are prevented by not using <code>additionalProperties</code>.</p>
</div>
<div class="paragraph">
<p>See also rule <a href="#111">[111]</a> in the <a href="#compatibility">[compatibility]</a> section for further guidelines
on the use of <code>additionalProperties</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="211">{MUST} use unique event identifiers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>eid</code> (event identifier) value of an event must be unique.</p>
</div>
<div class="paragraph">
<p>The <code>eid</code> property is part of the standard <a href="#event-metadata">metadata</a>
for an event and gives the event an identifier. Producing clients must
generate this value when sending an event and it must be guaranteed to
be unique from the perspective of the owning application. In particular
events within a given event type&#8217;s stream must have unique identifiers.
This allows consumers to process the <code>eid</code> to assert the event is unique
and use it as an idempotency check.</p>
</div>
<div class="paragraph">
<p>Note that uniqueness checking of the <code>eid</code> might be not enforced by
systems consuming events and it is the responsibility of the producer to
ensure event identifiers do in fact distinctly identify events. A
straightforward way to create a unique identifier for an event is to
generate a UUID value.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="212">{SHOULD} design for idempotent out-of-order processing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Events that are designed for <a href="#149">idempotent</a> out-of-order
processing allow for extremely resilient systems: If processing an event
fails, consumers and producers can skip/delay/retry it without stopping
the world or corrupting the processing result.</p>
</div>
<div class="paragraph">
<p>To enable this freedom of processing, you must explicitly design for
idempotent out-of-order processing: Either your events must contain
enough information to infer their original order during consumption or
your domain must be designed in a way that order becomes irrelevant.</p>
</div>
<div class="paragraph">
<p>As common example similar to data change events, idempotent out-of-order
processing can be supported by sending the following information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the process/resource/entity identifier,</p>
</li>
<li>
<p>a <a href="#203">monotonically increasing ordering key</a> and</p>
</li>
<li>
<p>the process/resource state after the change.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A receiver that is interested in the current state can then ignore
events that are older than the last processed event of each resource. A
receiver interested in the history of a resource can use the ordering
key to recreate a (partially) ordered sequence of events.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="213">{MUST} follow naming convention for event type names</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Event type names must (or should, see <a href="#223">[223]</a> for details and definition)
conform to the functional naming depending on the <a href="#219">audience</a> as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bnf" data-lang="bnf">&lt;event-type-name&gt;       ::= &lt;functional-event-name&gt; | &lt;application-event-name&gt;

&lt;functional-event-name&gt; ::= &lt;functional-name&gt;.&lt;event-name&gt;

&lt;event-name&gt;            ::= [a-z][a-z0-9-]* -- free event name (functional name)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following application specific legacy convention is <strong>only</strong> allowed for
<a href="#223">internal</a> event type names:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bnf" data-lang="bnf">&lt;application-event-name&gt; ::= [&lt;organization-id&gt;.]&lt;application-id&gt;.&lt;event-name&gt;
&lt;organization-id&gt;  ::= [a-z][a-z0-9-]* -- organization identifier, e.g. team identifier
&lt;application-id&gt;   ::= [a-z][a-z0-9-]* -- application identifier</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Note:</strong> consistent naming should be used whenever the same entity is exposed
by a data change event and a RESTful API.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="214">{MUST} prepare event consumers for duplicate events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Event consumers must be able to process duplicate events.</p>
</div>
<div class="paragraph">
<p>Most message brokers and data streaming systems offer "at-least-once"
delivery. That is, one particular event is delivered to the consumers
one or more times. Other circumstances can also cause duplicate events.</p>
</div>
<div class="paragraph">
<p>For example, these situations occur if the publisher sends an event and
doesn&#8217;t receive the acknowledgment (e.g. due to a network issue). In
this case, the publisher will try to send the same event again. This
leads to two identical events in the event bus which have to be
processed by the consumers. Similar conditions can appear on consumer
side: an event has been processed successfully, but the consumer fails
to confirm the processing.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-04-06 12:28:15 UTC
</div>
</div>
</body>
</html>